$(document).ready(function(){function e(){$.get("/coordinator/budget/getlatest",function(e){$(".slot").text(e.slot_count),$(".budget").text(e.amount)})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t="",a="/coordinator/utilities";$("#table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columns:[{data:"description",name:"description"},{data:"is_active",name:"is_active",searchable:!1,orderable:!1}]});$("#view_step").on("hide.bs.modal",function(){$("#frmStep").trigger("reset"),$(".steps").empty()}),$("#view_claim").on("hide.bs.modal",function(){$("#frmClaim").trigger("reset"),$(".stipend").empty()}),$(".table").DataTable(),$("td").on("click",".btn-progress",function(){$(".btn-progress").attr("disabled","disabled"),setTimeout(function(){$(".btn-progress").removeAttr("disabled")},1e3);var e=$(this).val();t=e,$.get(a+"/create/"+e,function(e){$.each(e,function(e,t){var a="<li><input type='checkbox' id=check"+t.id+" name='steps[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".steps").append(a)}),void 0!=e[0]?$("#view_step").modal("show"):$.notify({icon:"fa fa-check",message:"No requirement passed"},{type:"success",z_index:2e3,delay:5e3})})}),$("td").on("click",".open-modal",function(){$(".open-modal").attr("disabled","disabled"),setTimeout(function(){$(".open-modal").removeAttr("disabled")},1e3);var e=$(this).val();t=e,$.get(a+"/allocation/"+e,function(e){$.each(e,function(e,t){var a="<li><input type='checkbox' id="+t.id+" name='claim[]' value="+t.id+"><span class='text' style='padding-left: 15px;'>"+t.description+"</span></li>";$(".stipend").append(a)}),void 0!=e[0]?$("#view_claim").modal("show"):$.notify({icon:"fa fa-check",message:"No allocation claimed"},{type:"success",z_index:2e3,delay:5e3})})}),$("#list").on("change","#isActive",function(){var e=$(this).val(),t=0;$(this).prop("checked")&&(t=1);var i={is_active:t};$.ajax({url:a+"/checkbox/"+e,type:"PUT",data:i,success:function(e){Pace.restart()},error:function(e){}})}),$("#btn-save").click(function(){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var i=$("#frmClaim").serialize();$.ajax({url:a+"/allocation/"+t,type:"PUT",data:i,dataType:"json",success:function(t){$("#view_claim").modal("hide"),e(),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$("#btn-submit").click(function(){$("#btn-submit").attr("disabled","disabled"),setTimeout(function(){$("#btn-submit").removeAttr("disabled")},1e3);var e=$("#frmStep").serialize();$.ajax({url:a+"/"+t,type:"PUT",data:e,dataType:"json",success:function(e){$("#view_step").modal("hide"),swal({title:"Success!",text:"<center>Data Stored</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(e){$.notify({icon:"fa fa-warning",message:e.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}),$(".todo-list").todoList()});